## ch1 绪论

![image-20210314100935936](https://i.loli.net/2021/03/14/I6QVXRO1FwSWmH3.png)

### 1.1 Data Management

数据：能够被记录且具有实际含义的已知事实

数据管理：在计算机中对数据进行存储、检索、更新、共享

基于文件系统的数据管理方法：
数据存储与文件中，数据由应用程序经过文件系统进行管理。
方法：写程序，读文件、处理数据、检索
缺点：每当文件的格式变化，就要修改程序；文件中有冗余数据，每次访问数据库可能只需要其中的一部分数据；文件修改可能造成数据不一致、破坏数据正确性；没有索引，数据访问效率低；只能对整个文件进行访问控制，数据安全性差；没有并发控制，多个应用程序同时读写文件可能产生冲突。在应用程序中解决这些缺点会很麻烦。

基于数据库管理系统的数据管理方法：
数据存储于数据库，应用程序经过DBMS进行管理

![image-20210314102057875](https://i.loli.net/2021/03/14/D9bpGEUOKJFhBLX.png)

数据管理的功能：数据定义（定义数据的结构、类型及约束）、数据存储（存取数据）、数据操纵（查询、更新数据）、数据共享（事务管理、并发控制、故障恢复）、数据控制（保证数据完整性、数据安全性）、数据维护（数据录入、数据转换、数据备份、数据恢复、性能监控）

### 1.2 Database Systems

数据库就是一系列相关的数据，这些数据是有组织的、共享的、持久化的。

DBMS：系统，方便多个用户和应用程序之间database的组织、存储、操纵、控制和维护。

数据库用户：数据库管理员、数据库设计者、终端用户

数据库系统：由数据库、数据库管理系统、应用程序和数据库用户在一起构成的系统

### 1.3 Data Independence

数据抽象：将现实世界映射到计算机世界
现实世界：张三、数学系、高等数学、大学物理
信息世界：实体、属性、联系、约束
计算机世界：记录、域、引用

**数据模型：**完成数据抽象的工具。三要素：

* 用于描述数据库结构的一系列概念——数据库结构是什么
* 用于操纵数据结构的一系列操作——在这个结构上可以干什么
* 数据库应当服从的约束条件——约束

**数据模型的分类：**
概念数据模型：提供的概念最接近用户理解数据的方式，用于将现实世界映射到信息世界
物理数据模型：该模型提供的概念用于描述数据库在计算机中的**存储细节**
实现数据模型：实现DBMS时使用，如关系数据模型

![image-20210314111935753](https://i.loli.net/2021/03/14/U8xtpwOLFEkH7SX.png)

**数据库模式：**对数据库的结构、类型、约束的描述

* 是数据库的“类型声明”，数据库模式不经常变化（代价较高）
* 每个表都有他的模式和实例，**模式**一般不怎么变化，但**实例**会不断变化

<img src="https://i.loli.net/2021/04/09/xmQNLrSPunt2hCf.png#" alt="image-20210409084532027" style="zoom:67%;" />

数据库实例：数据库在某一特定时间存储的数据，是数据库的值

数据库的三层模式结构：

* 内模式(存储模式)：描述数据库的物理存储结构和存取方法，定义内模式时使用物理数据模型提供的概念
* 概念模式：为**全体**数据库用户描述**整个**数据库的结构和约束，数据库只有一个概念模式，定义概念模式时使用实现数据模型提供的概念
* 外模式（视图）：从不同类别用户的视角，描述数据库的结构，数据库可以有多个外模式，定义外模式使用实现数据模型提供的概念
  整体数据库的数据量是非常庞大的，但某一个视图可能只需要看一部分数据

<img src="https://i.loli.net/2021/03/14/M9NyowpkmqJXdIS.png#" alt="image-20210314112728874" style="zoom:67%;" />

模式映射：不同模式间的映射用于完成应用程序与数据库之间的数据转换和请求转换

* 请求转换：应用程序依据**外模式**开发，其在外模式上声明的数据请求通过**模式映射**转换为DBMS在**内模式**上的请求
* 数据转换：数据库的物理存储按照**内模式**组织，DBMS检索到的数据通过**模式映射**转换为符合**外模式**的组织形式，返回给应用

模式映射的分类：外模式-概念模式映射、概念模式-内模式映射

数据独立性：

* 逻辑数据独立性：概念模式改变，只需修改外模式到概念模式的映射，而外模式无需改变，依据外模式开发的应用程序也无需改变
* 物理数据独立性：内模式改变，只需改概念模式到内模式的映射，概念模式、外模式（应用程序）均无需改变

### 1.4 Database Language

数据库语言是用户/应用程序和DBMS交互时所使用的语言。

* 数据定义语言：DBA和数据库设计者用来声明数据库模式的语言
* 数据操纵语言：查询和更新数据库时所使用的语言

数据库查询：DML通常是描述式的，用它编写的数据库查询只**描述查询意图**，不指明查询执行过程。
DBMS自动生成最优的查询计划，然后在数据库上执行查询计划

### 1.5 Index Structures

索引能够帮助DBMS快速找到关系中满足搜索条件的元组

索引的构成：

索引键：索引根据一组属性（索引键）来定位元组，索引记录了元组的索引键值与元组地址的对应关系

索引项：（键值，地址）对，按索引**键值**排序

### 1.6 Transaction Processing

事务是由数据库上的一系列操作完成的复杂任务，这些操作要么全执行，要么不执行。例如银行转帐（钱出去、钱收到）

事务的性质：原子性、一致性、隔离性、持久性

并发控制：确保多个事务并发执行不破坏数据库一致性

故障恢复：计算机软硬件随时可能发生故障，可能在事务执行过程发生，破坏数据库的一致性，故障恢复可以确保数据库可以恢复到最近的一致性状态。